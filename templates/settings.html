<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PayslipSnap ‚Äî Settings</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:'DM Sans',sans-serif;background:#f0f4f8;min-height:100vh}.topbar{background:#141926;border-bottom:1px solid #2A3148;padding:14px 24px;display:flex;align-items:center;justify-content:space-between}.topbar h1{font-size:20px;font-weight:700;color:#E8ECF4}.topbar h1 span{color:#7c3aed}.topbar a{font-size:13px;color:#8B95B0;text-decoration:none;padding:8px 14px;border-radius:8px}.main{max-width:700px;margin:0 auto;padding:24px}h2{font-size:22px;font-weight:700;color:#E8ECF4;margin-bottom:20px}.card{background:#141926;border-radius:12px;padding:24px;margin-bottom:20px}.card h3{font-size:15px;font-weight:700;color:#374151;margin-bottom:16px;padding-bottom:10px;border-bottom:1px solid #f1f5f9}.row{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group{margin-bottom:16px}.form-group label{display:block;font-size:13px;font-weight:600;color:#374151;margin-bottom:5px}.form-group input,.form-group textarea{width:100%;padding:10px 12px;border:1.5px solid #2A3148;border-radius:8px;font-size:14px;font-family:'DM Sans',sans-serif}.form-group input:focus,.form-group textarea:focus{outline:none;border-color:#7c3aed}.form-group textarea{resize:vertical;min-height:80px}.hint{font-size:12px;color:#94a3b8;margin-top:3px}.color-input{display:flex;align-items:center;gap:10px}.color-input input[type=color]{width:44px;height:44px;border:2px solid #2A3148;border-radius:8px;cursor:pointer;padding:2px}.logo-preview img{max-height:60px;border-radius:6px;border:1px solid #2A3148;margin-top:8px}.btn{padding:13px 28px;background:#7c3aed;color:#fff;border:none;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;font-family:'DM Sans',sans-serif}.btn:hover{background:#6d28d9}.actions{display:flex;justify-content:flex-end}.flash{padding:12px 16px;border-radius:10px;font-size:14px;margin-bottom:16px}.flash.success{background:#f0fdf4;color:#16a34a;border:1px solid #bbf7d0}
    </style>
</head>
<body>
<div class="topbar"><h1>Payslip<span>Snap</span></h1><a href="/">‚Üê Dashboard</a></div>
<div class="main">
    {% with messages = get_flashed_messages(with_categories=true) %}{% for cat, msg in messages %}<div class="flash {{ cat }}">{{ msg }}</div>{% endfor %}{% endwith %}
    <h2>‚öôÔ∏è Settings</h2>
    <form method="POST" enctype="multipart/form-data">
        <div class="card">
            <h3>Company Information</h3>
            <div class="form-group"><label>Company Name</label><input type="text" name="company_name" value="{{ user.company_name or '' }}"></div>
            <div class="form-group"><label>Address</label><textarea name="company_address">{{ user.company_address or '' }}</textarea></div>
            <div class="row">
                <div class="form-group"><label>Email</label><input type="email" name="company_email" value="{{ user.company_email or '' }}"></div>
                <div class="form-group"><label>Phone</label><input type="text" name="company_phone" value="{{ user.company_phone or '' }}"></div>
            </div>
        </div>
        <div class="card">
            <h3>Statutory Registration</h3>
            <div class="row">
                <div class="form-group"><label>Company PAN</label><input type="text" name="pan_number" value="{{ user.pan_number or '' }}" placeholder="ABCDE1234F" style="text-transform:uppercase"><div class="hint">Required for Form 16</div></div>
                <div class="form-group"><label>TAN Number</label><input type="text" name="tan_number" value="{{ user.tan_number or '' }}" placeholder="MUMA12345E" style="text-transform:uppercase"><div class="hint">Tax Deduction Account Number</div></div>
            </div>
            <div class="row">
                <div class="form-group"><label>PF Registration No.</label><input type="text" name="pf_reg_number" value="{{ user.pf_reg_number or '' }}" placeholder="MH/MUM/12345"><div class="hint">EPFO establishment code</div></div>
                <div class="form-group"><label>ESI Registration No.</label><input type="text" name="esi_reg_number" value="{{ user.esi_reg_number or '' }}" placeholder="If applicable"></div>
            </div>
        </div>
        <div class="card">
            <h3>Branding</h3>
            <div class="form-group"><label>Logo</label><input type="file" name="logo" accept=".jpg,.jpeg,.png,.webp" style="padding:8px">
                {% if user.logo_data %}<div class="logo-preview"><img src="{{ user.logo_data }}"></div>{% endif %}
            </div>
            <div class="form-group"><label>Brand Color</label>
                <div class="color-input">
                    <input type="color" value="{{ user.brand_color or '#7c3aed' }}" onchange="document.getElementById('bc').value=this.value">
                    <input type="text" id="bc" name="brand_color" value="{{ user.brand_color or '#7c3aed' }}">
                </div>
                <div class="hint">Auto-extracted from logo. Used on payslip PDFs.</div>
            </div>
        </div>
        <div class="actions"><button type="submit" class="btn">üíæ Save Settings</button></div>
    </form>
</div>
</body></html>
